---
import { type CollectionEntry, getCollection } from "astro:content";
import dayjs from "dayjs";
import Layout from "../../../layouts/layout.astro";

interface Props {
  post: CollectionEntry<"posts">;
}

export async function getStaticPaths() {
  const allPosts = await getCollection("posts");
  return allPosts.map((post) => ({
    params: {
      slug: post.slug,
    },
    props: {
      post,
    },
  }));
}

const { post } = Astro.props;
const { Content } = await post.render();
---

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width" />
  <link rel="icon" href="/favicon.svg" />
  <meta name="description" content={post.data.title} />
  <meta property="twitter:title" content=" shivam " />
  <meta
    name="twitter:image"
    content="https://shivam.ing/images/opengraph-image.png"
  />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:creator" content="@shivamhwp" />
  <meta property="og:title" content={post.data.title || ""} />
  <meta property="og:description" content={post.data.title} />
  <meta property="og:site_name" content="shivam.ing" />
  <meta property="og:url" content="https://www.shivam.ing" />
  <meta
    property="og:image"
    content="https://shivam.ing/images/opengraph-image.png"
  />
  <title>{post.data.title || ""}</title>
</head>
<Layout>
  <article>
    <header class="pb-6">
      <div
        class="flex flex-col sm:flex-row sm:items-start sm:justify-between gap-3 sm:gap-4"
      >
        <div class="flex-1 min-w-0">
          <h1 class="text-foreground text-2xl sm:text-3xl md:text-4xl sm:mb-4">
            {post.data.title}
          </h1>
          <time
            class="text-muted-foreground text-sm sm:text-base font-mono"
            datetime={post.data.published.toISOString()}
          >
            {dayjs(post.data.published).format("MMMM D, YYYY")}
          </time>
        </div>
        {
          post.data.director && (
            <div class="shrink-0 text-right">
              <div class="text-muted-foreground text-xs sm:text-sm font-mono  tracking-wide mb-1">
                director
              </div>
              <div class="text-foreground text-sm sm:text-base font-medium">
                {post.data.director}
              </div>
            </div>
          )
        }
      </div>
    </header>
    <div
      class="text-foreground/60 w-full [&_h1]:font-bold [&_h1]:text-foreground [&_h1]:mt-8 [&_h1]:mb-4 [&_h1]:text-3xl [&_h1]:sm:text-4xl [&_h2]:font-semibold [&_h2]:text-foreground [&_h2]:mt-8 [&_h2]:mb-4 [&_h2]:text-2xl [&_h2]:sm:text-3xl [&_h3]:font-semibold [&_h3]:text-foreground [&_h3]:mt-8 [&_h3]:mb-4 [&_h3]:text-xl [&_h3]:sm:text-2xl [&_h4]:font-medium [&_h4]:text-foreground [&_h4]:mt-8 [&_h4]:mb-4 [&_h4]:text-lg [&_h4]:sm:text-xl [&_p]:mb-6 [&_p]:text-lg [&_p]:leading-[1.75] [&_a]:text-foreground [&_a]:no-underline [&_a]:transition-all [&_a:hover]:opacity-80 [&_ul]:mb-6 [&_ul]:pl-6 [&_ul]:space-y-2 [&_ol]:mb-6 [&_ol]:pl-6 [&_ol]:space-y-2 [&_li]:mb-2 [&_li]:leading-[1.75] [&_li]:marker:text-muted-foreground [&_code]:font-mono [&_code]:text-sm [&_code]:bg-muted-foreground/10 [&_code]:px-1.5 [&_code]:py-0.5 [&_code]:rounded [&_pre]:font-mono [&_pre]:overflow-x-auto [&_pre]:mb-6 [&_pre]:p-4 [&_pre]:bg-muted-foreground/5 [&_pre]:rounded [&_pre]:border [&_pre]:border-muted-foreground/20 [&_pre_code]:bg-transparent [&_pre_code]:p-0 [&_blockquote]:border-l-2 [&_blockquote]:border-muted-foreground/30 [&_blockquote]:pl-6 [&_blockquote]:italic [&_blockquote]:text-muted-foreground [&_blockquote]:my-6 [&_hr]:border-muted-foreground/20 [&_hr]:my-8 [&_img]:rounded [&_img]:my-6 [&_strong]:font-semibold [&_strong]:text-foreground [&_em]:italic [&_table]:w-full [&_table]:mb-6 [&_table]:border-collapse [&_th]:border [&_th]:border-muted-foreground/20 [&_th]:px-4 [&_th]:py-2 [&_td]:border [&_td]:border-muted-foreground/20 [&_td]:px-4 [&_td]:py-2 [&_th]:font-semibold [&_th]:bg-muted-foreground/5"
    >
      <Content />
    </div>
    <footer class="mt-8 sm:mt-10 sm:pt-8 pb-16 sm:pb-20">
      <a
        href="/writings"
        class="text-muted-foreground hover:text-foreground transition-colors inline-flex items-center gap-2 text-sm sm:text-base no-underline group"
      >
        <span>‚Üê</span>
        <span>back</span>
      </a>
    </footer>
  </article>
</Layout>
